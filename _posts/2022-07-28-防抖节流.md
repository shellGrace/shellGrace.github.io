---
date: 2022-07-28
title: é˜²æŠ–èŠ‚æµ
categories:
  - javascript
featured_image: images/js.jpg
---
biubiubiu~
## é˜²æŠ–
åœ¨æŸä¸ªæ—¶é—´å†…ï¼Œæ²¡æœ‰å†æ¬¡è§¦å‘æŸä¸ªå‡½æ•°æ—¶ï¼Œæ‰çœŸæ­£çš„è°ƒç”¨è¿™ä¸ªå‡½æ•°
åˆ›å»ºä¸€ä¸ª debouncedï¼ˆé˜²æŠ–åŠ¨ï¼‰å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šä»ä¸Šä¸€æ¬¡è¢«è°ƒç”¨åï¼Œå»¶è¿Ÿ wait æ¯«ç§’åè°ƒç”¨ func æ–¹æ³•

### åŸç†
é˜²æŠ–çš„åŸç†å°±æ˜¯ï¼šä½ å°½ç®¡è§¦å‘äº‹ä»¶ï¼Œä½†æ˜¯æˆ‘ä¸€å®šåœ¨äº‹ä»¶è§¦å‘ n ç§’åæ‰æ‰§è¡Œï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªäº‹ä»¶è§¦å‘çš„ n ç§’å†…åˆè§¦å‘äº†è¿™ä¸ªäº‹ä»¶ï¼Œé‚£æˆ‘å°±ä»¥æ–°çš„äº‹ä»¶çš„æ—¶é—´ä¸ºå‡†ï¼Œn ç§’åæ‰æ‰§è¡Œï¼Œæ€»ä¹‹ï¼Œå°±æ˜¯è¦ç­‰ä½ è§¦å‘å®Œäº‹ä»¶ n ç§’å†…ä¸å†è§¦å‘äº‹ä»¶

### åº”ç”¨åœºæ™¯
è¾“å…¥æ¡†ä¸­é¢‘ç¹çš„è¾“å…¥å†…å®¹ï¼Œæœç´¢æˆ–è€…æäº¤ä¿¡æ¯
é¢‘ç¹çš„ç‚¹å‡»æŒ‰é’®ï¼Œè§¦å‘æŸä¸ªäº‹ä»¶
ç›‘å¬æµè§ˆå™¨æ»šåŠ¨äº‹ä»¶ï¼Œå®ŒæˆæŸäº›ç‰¹å®šæ“ä½œ
ç”¨æˆ·ç¼©æ”¾æµè§ˆå™¨çš„resizeäº‹ä»¶

### ğŸŒ°
æ¯”å¦‚è¯´æœ‰ä¸€å¤©æˆ‘ä¸Šå®Œè¯¾ï¼Œæˆ‘è¯´å¤§å®¶æœ‰ä»€ä¹ˆé—®é¢˜æ¥é—®æˆ‘ï¼Œæˆ‘ä¼šç­‰å¾…ä¸€åˆ†é’Ÿçš„æ—¶é—´ã€‚
å¦‚æœåœ¨ä¸€åˆ†é’Ÿçš„æ—¶é—´å†…ï¼Œæ²¡æœ‰åŒå­¦é—®æˆ‘é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘å°±ä¸‹è¯¾äº†ï¼›
åœ¨æ­¤æœŸé—´ï¼ŒaåŒå­¦è¿‡æ¥é—®é—®é¢˜ï¼Œå¹¶ä¸”å¸®ä»–è§£ç­”ï¼Œè§£ç­”å®Œåï¼Œæˆ‘ä¼šå†æ¬¡ç­‰å¾…ä¸€åˆ†é’Ÿçš„æ—¶é—´çœ‹æœ‰æ²¡æœ‰å…¶ä»–åŒå­¦é—®é—®é¢˜ï¼›
å¦‚æœæˆ‘ç­‰å¾…è¶…è¿‡äº†1åˆ†é’Ÿï¼Œå°±ç‚¹å‡»äº†ä¸‹è¯¾ï¼ˆæ‰çœŸæ­£æ‰§è¡Œè¿™ä¸ªæ—¶é—´ï¼‰


```javascript
const debounce = function(foo, t) {
  let timer
  return function() {
  //åˆ¤æ–­æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œå¦‚æœä¸æ˜¯ï¼Œæ¸…é™¤ä¸Šä¸€æ¬¡å®šæ—¶
    if (timer !== undefined) {
      clearTimeout(timer)
    }
    timer = setTimeout(() => {
    // å°†thisæŒ‡å‘ç»‘å®šåˆ°fooå‡½æ•°ä¸Š
      foo.apply(this, arguments)              
    }, t)  
  }
}
debounce('é˜²æŠ–å‡½æ•°å', 'å»¶æ—¶æ—¶é—´')
```

## èŠ‚æµ
åœ¨æŸä¸ªæ—¶é—´å†…ï¼ˆæ¯”å¦‚500msï¼‰ï¼ŒæŸä¸ªå‡½æ•°åªèƒ½è¢«è§¦å‘ä¸€æ¬¡
æŒ‰ç…§ä¸€å®šçš„é¢‘ç‡è¿›è¡Œè°ƒç”¨
åˆ›å»ºä¸€ä¸ªèŠ‚æµå‡½æ•°ï¼Œåœ¨ wait ç§’å†…æœ€å¤šæ‰§è¡Œ func ä¸€æ¬¡çš„å‡½æ•°ã€‚

### åŸç†
å¦‚æœä½ æŒç»­è§¦å‘äº‹ä»¶ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œåªæ‰§è¡Œä¸€æ¬¡äº‹ä»¶ã€‚

### ğŸŒ°
å¾ˆå¤šé£æœºå¤§æˆ˜çš„æ¸¸æˆä¸­ä¼šæœ‰è¿™æ ·çš„è®¾å®šï¼Œå³ä½¿æŒ‰ä¸‹çš„é¢‘ç‡éå¸¸å¿«ï¼Œå­å¼¹ä¹Ÿä¼šä¿æŒä¸€å®šçš„é¢‘ç‡æ¥å‘å°„ï¼ˆå…¶å®å¾ˆå¤šçš„è¡—æœºæ¸¸æˆéƒ½æ˜¯è¿™æ ·çš„ï¼Œæ™®é€šæ”»å‡»æœ‰ä¸€ä¸ªæœ€é«˜çš„é¢‘ç‡ï¼‰
æ¯”å¦‚1ç§’é’Ÿåªèƒ½å‘å°„ä¸€æ¬¡ï¼Œå³ä½¿ç”¨æˆ·åœ¨è¿™1ç§’é’ŸæŒ‰ä¸‹äº†10æ¬¡ï¼Œå­å¼¹ä¼šä¿æŒå‘å°„ä¸€é¢—çš„é¢‘ç‡æ¥å‘å°„
ä½†æ˜¯äº‹ä»¶æ˜¯è§¦å‘äº†10æ¬¡çš„ï¼Œå“åº”çš„å‡½æ•°åªè§¦å‘äº†ä¸€æ¬¡

### åº”ç”¨åœºæ™¯
ç›‘å¬é¡µé¢çš„æ»šåŠ¨äº‹ä»¶
é¼ æ ‡ç§»åŠ¨äº‹ä»¶
ç”¨æˆ·é¢‘ç¹ç‚¹å‡»æŒ‰é’®æ“ä½œ
æ¸¸æˆä¸­çš„ä¸€äº›è®¾è®¡

### å®ç°
ä½¿ç”¨æ—¶é—´æˆ³ï¼Œæˆ–æ˜¯è®¾ç½®å®šæ—¶å™¨

#### æ—¶é—´æˆ³
ä½¿ç”¨æ—¶é—´æˆ³ï¼Œå½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å–å‡ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œç„¶åå‡å»ä¹‹å‰çš„æ—¶é—´æˆ³(æœ€ä¸€å¼€å§‹å€¼è®¾ä¸º 0 )ï¼Œå¦‚æœå¤§äºè®¾ç½®çš„æ—¶é—´å‘¨æœŸï¼Œå°±æ‰§è¡Œå‡½æ•°ï¼Œç„¶åæ›´æ–°æ—¶é—´æˆ³ä¸ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œå¦‚æœå°äºï¼Œå°±ä¸æ‰§è¡Œã€‚

```javascript
function throttle(func, delay) {
    let last = 0;
    return function (...args) {
        let now = +new Date();
        if (now - last >= delay) {
            func.apply(this, args);
            last = now;
        }
    };
}
// ç¤ºä¾‹ä½¿ç”¨
function handleScroll() {
    console.log("Scrolling...");
}
const throttledHandleScroll = throttle(handleScroll, 300); // åˆ›å»ºä¸€ä¸ªèŠ‚æµå‡½æ•°ï¼Œæ¯300æ¯«ç§’æ‰§è¡Œä¸€æ¬¡
// æ¨¡æ‹Ÿæ»šåŠ¨äº‹ä»¶
window.addEventListener("scroll", throttledHandleScroll);
```

#### è®¾ç½®å®šæ—¶å™¨
å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå†è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œå¦‚æœå®šæ—¶å™¨å­˜åœ¨ï¼Œå°±ä¸æ‰§è¡Œï¼Œç›´åˆ°å®šæ—¶å™¨æ‰§è¡Œï¼Œç„¶åæ‰§è¡Œå‡½æ•°ï¼Œæ¸…ç©ºå®šæ—¶å™¨ï¼Œè¿™æ ·å°±å¯ä»¥è®¾ç½®ä¸‹ä¸ªå®šæ—¶å™¨ã€‚

```javascript
function throttle(func, wait) {
    var timeout;
    var previous = 0;
    return function() {
        context = this;
        args = arguments;
        if (!timeout) {
            timeout = setTimeout(function(){
                timeout = null;
                func.apply(context, args)
            }, wait)
        }

    }
}
```

### ç»“åˆå®šæ—¶å™¨è®¾ç½®å’Œæ—¶é—´æˆ³ç‰ˆæœ¬

https://underscorejs.org/docs/modules/throttle.html
